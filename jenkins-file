@Library(["sofa-shared-libraries@master", "JenkinsSharedLibs@master"]) _

import com.socgen.jenkins.talend.*

ocpCreateTalendBuildPod(true) {

    pipelineGitUrl = ""
    pipelineGitBranchPattern = ""
    pipelineGitCredentialId = "SFA-PRD-SVC"
    pipelineGitJenkinsFile = ""

    container("build") {
        sh "/usr/local/bin/entrypoint"
        sh "/talend/envsubst-file.sh"

        checkout([$class: 'GitSCM', branches: [[name: pipelineGitBranchPattern]], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'CleanBeforeCheckout'],
                                    [$class: 'SubmoduleOption', disableSubmodules: false, parentCredentials: true,
                                     recursiveSubmodules: true, trackingSubmodules: false]], submoduleCfg: [], userRemoteConfigs: [[credentialsId: pipelineGitCredentialId, url: pipelineGitUrl]
                                     ]])
    
        def flow = load pipelineGitJenkinsFile
         
        
    }
}

   

